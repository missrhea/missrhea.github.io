{"componentChunkName":"component---src-templates-blog-post-js","path":"/Google-Analytics-For-Gatsby/","result":{"data":{"site":{"siteMetadata":{"title":"Rhea Rodrigues"}},"markdownRemark":{"id":"da02f1a9-a30c-55bc-98e3-02e058571ba3","excerpt":"I’ve wanted to add analytics capabilities to this website for a while. And, Google Analytics sounded like the tool with the least resistance. I am aware of the…","html":"<style>\nbody {\ntext-align: justify}\n</style>\n<p>I’ve wanted to add analytics capabilities to this website for a while. And, Google Analytics sounded like the tool with the least resistance. I am aware of the <a href=\"https://plausible.io/blog/remove-google-analytics\">nasty consequences</a> of using Google Analytics versus an ethical and privacy-focused <a href=\"https://ethical.net/ethical/google-alternatives/\">alternative</a>. Some day I will make the shift. For now, to get familiar with analytics Google Analytics will do.</p>\n<p>I knew a Gatsby plug-in i.e. <a href=\"https://www.gatsbyjs.com/plugins/gatsby-plugin-google-analytics/\">gatsby-plugin-google-analytics</a> enabled integration with Google Analytics. However, in late 2020 Google Analytics got an <a href=\"https://support.google.com/analytics/answer/10089681\">upgrade</a>. </p>\n<p>Without getting confused with details, here are two points to understand how a Gatsby site is affected by this upgrade.</p>\n<ul>\n<li>The tracking ID (or unique identifier that Google Analytics associates with a site) was associated with a Universal Analytics property before October 14, 2020. The gatsby-plugin-google-analytics supported this Universal Analytics property.</li>\n<li>The upgrade uses a Google Analytics 4 property (by default). The tracking ID is associated with this new Google Analytics 4 property. The gatsby-plugin-google-analytics does not support this new property. A new plug-in, <a href=\"https://www.gatsbyjs.com/plugins/gatsby-plugin-google-gtag/\">gatsby-plugin-google-gtag</a> enables integration with the upgraded version.</li>\n</ul>\n<p>Let’s get started with adding analytics to our Gatsby site.</p>\n<h3>1. Set up Google Analytics</h3>\n<p>This <a href=\"https://www.youtube.com/watch?v=A9rCUVCB6hw\">video</a> is a great resource for this step.</p>\n<p>And this <a href=\"https://www.youtube.com/watch?v=wX9euOw4mGY\">video</a> goes over the same thing. Except at the 5-minute mark, there is an explanation for the data stream set up specifically for a static site (i.e. any site Gatsby generates).</p>\n<p>You’ll obviously need to set up a Google Analytics account. You can follow the steps <a href=\"https://support.google.com/analytics/answer/9304153\">here</a>, to do the following,</p>\n<ol>\n<li>Create an Analytics account.</li>\n<li>Create a Google Analytics 4 property.</li>\n<li>\n<p>Add a data stream (for Web, not an app).</p>\n<p>—> Settings > Enhanced measurement > Page views > Uncheck “page changes based on browser history events”.</p>\n</li>\n<li>\n<p>Set up data collection (for websites)</p>\n<p>—> Navigate to Admin > Property > Data Streams > Click on your website to see Web Stream Details. Copy the Measurement ID. </p>\n</li>\n</ol>\n<h3>2. Configure the Gatsby Plug-in</h3>\n<p>The gatsby-plugin-google-gtag docs provide the steps to configure this plug-in. </p>\n<p>After struggling and eventually getting answers from StackOverflow and YouTube, I have some pointers here,</p>\n<ol>\n<li>This plug-in should be the first one in the <code class=\"language-text\">gatsby-config.js</code> file. </li>\n<li>Paste the Measurement ID against the trackingIds option.</li>\n<li>Set the ‘head’ option to true.</li>\n<li>I got rid of the other options for simplicity.</li>\n</ol>\n<p>And, we are done. To test if this works, let’s run our Gatsby site in production mode, so run <code class=\"language-text\">gatsby build &amp;&amp; gatsby serve</code>. Click around the site links. Navigate to the Google Analytics dashboard and you should see some live user activity!</p>\n<p><em>Sidenote:</em></p>\n<blockquote>\n<p>The <a href=\"https://www.gatsbyjs.com/plugins/gatsby-plugin-google-gtag/\">gatsby-plugin-google-gtag plug-in docs</a> mention that this plugin only works in production mode. So run,\n<code class=\"language-text\">gatsby build &amp;&amp; gatsby serve</code>.\nIf you run, <code class=\"language-text\">gatsby develop</code>, you’ll receive a warning:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">warn Plugin gatsby-plugin-google-gtag is not compatible with your gatsby version 2.22.15 - It requires &gt;gatsby@^3.0.0-next.0</code></pre></div>\n</blockquote>","frontmatter":{"title":"Google Analytics For Gatsby!","rating":null,"date":"March 13, 2021","description":"Collect and analyse website traffic with a Gatsby Plugin."}}},"pageContext":{"slug":"/Google-Analytics-For-Gatsby/"}}}